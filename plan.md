# 🗺️ نقشه کامل سایت کتاب‌نت (KETAB NET)

> **فروشگاه آنلاین کتاب با پنل مدیریت**  
> تاریخ: دی ۱۴۰۴  
> تکنولوژی: PHP + MySQL + Vanilla JavaScript

---

## 📁 ساختار کامل پوشه‌ها و فایل‌ها

```
📦 ketab-net/
│
├── 📂 admin/                           # پنل مدیریت
│   ├── 📂 css/
│   │   └── admin.css                   # استایل پنل ادمین
│   ├── 📂 fonts/
│   │   ├── Vazir.eot
│   │   ├── Vazir.woff
│   │   ├── Vazir.woff2
│   │   └── Vazir.ttf
│   ├── 📂 include/
│   │   ├── config.php                  # تنظیمات دیتابیس ادمین
│   │   ├── db.php                      # اتصال PDO
│   │   ├── header.php                  # هدر پنل (نوار بالا)
│   │   └── sidebar.php                 # منوی کناری (داشبورد، مقالات، محصولات، ...)
│   │
│   ├── index.php                       # 📊 داشبورد اصلی
│   ├── signin.php                      # 🔐 صفحه ورود مدیر
│   ├── logout.php                      # 🚪 خروج از پنل
│   │
│   ├── post.php                        # 📝 لیست مقالات
│   ├── new_post.php                    # ➕ افزودن مقاله جدید
│   ├── edit_post.php                   # ✏️ ویرایش مقاله
│   │
│   ├── product.php                     # 📦 لیست محصولات
│   ├── new_product.php                 # ➕ افزودن محصول جدید
│   ├── edit_product.php                # ✏️ ویرایش محصول
│   │
│   ├── category.php                    # 📂 لیست دسته‌بندی‌ها
│   ├── new_category.php                # ➕ افزودن دسته جدید
│   ├── edit_category.php               # ✏️ ویرایش دسته
│   │
│   └── comment.php                     # 💬 مدیریت نظرات مقالات
│
├── 📂 css/
│   └── style.css                       # استایل عمومی سایت
│
├── 📂 fonts/                           # فونت‌های فارسی
│   ├── Vazir.eot
│   ├── Vazir.woff
│   ├── Vazir.woff2
│   └── Vazir.ttf
│
├── 📂 img/                             # تصاویر عمومی سایت
│   ├── PNG4.png                        # آیکون سبد خرید
│   ├── boy.svg                         # آواتار کاربر
│   ├── 25.jpg                          # تصویر صفحه اصلی
│   └── ...
│
├── 📂 img1/                            # تصاویر اسلایدر
│   ├── 4.jpg
│   ├── 9.jpg
│   └── 11.jpg
│
├── 📂 upload/                          # پوشه آپلود فایل‌ها
│   ├── 📂 posts/                       # تصاویر مقالات
│   │   ├── 1.jpg
│   │   ├── 2.jpg
│   │   ├── 3.jpg
│   │   └── ...
│   │
│   └── 📂 products/                    # تصاویر محصولات
│       ├── Atomic_habits.jpg
│       ├── bfbe2404e6724561900f207326e1b13b.jpg
│       ├── 61X8IJmUqiL._UF1000,1000_QL80_.jpg
│       └── ...
│
├── 📂 include/                         # فایل‌های مشترک سایت
│   ├── config.php                      # ⚙️ تنظیمات اصلی (DB, امنیت, ...)
│   ├── db.php                          # 🔌 اتصال امن PDO به دیتابیس
│   ├── header.php                      # 🎨 هدر سایت (منو، اسلایدر، دارک مود)
│   ├── footer.php                      # 🦶 فوتر سایت (لینک‌ها، شبکه‌های اجتماعی)
│   └── sidebar.php                     # 📌 سایدبار (جستجو، دسته‌بندی، خبرنامه، درباره ما)
│
├── 📂 database/
│   └── blog_webprog (1).sql            # 💾 فایل SQL کامل دیتابیس
│
├── 🏠 index.php                        # صفحه اصلی (محصولات + مقالات)
├── 📦 products.php                     # لیست تمام محصولات
├── 📝 posts.php                        # لیست تمام مقالات
├── 📖 single.php                       # صفحه تک مقاله
├── 🛒 single_product.php               # صفحه تک محصول
├── 🛍️ cart.php                         # سبد خرید
├── 🔍 search.php                       # صفحه جستجو
├── ℹ️ about.php                        # درباره ما
│
├── ⚙️ add_to_cart.php                  # API افزودن به سبد (AJAX)
├── 🗑️ remove_from_cart.php            # API حذف از سبد (AJAX)
├── 🔄 update_cart.php                  # API به‌روزرسانی تعداد (AJAX)
│
├── 🎮 game.php                         # فایل تست/ناتمام (غیرفعال)
└── 📄 description.php                  # توضیحات ساختار پروژه
```

---

## 🎯 نقشه عملکردی سایت

### 🎨 بخش کاربران (Frontend)

```
┌──────────────────────────────────────────────────────────────┐
│                    🏠 صفحه اصلی (index.php)                  │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  [اسلایدر 3 تصویر]  ← جدول img                            │
│  ┌────────────────────────────────────────────────────┐    │
│  │  📸 تصویر 1  →  📸 تصویر 2  →  📸 تصویر 3        │    │
│  └────────────────────────────────────────────────────┘    │
│                                                              │
│  ┌─────────────────────────────────────────┐                │
│  │  📦 محصولات ویژه (6 محصول)            │                │
│  │  ┌──────┐ ┌──────┐ ┌──────┐            │                │
│  │  │ کتاب1│ │ کتاب2│ │ کتاب3│            │                │
│  │  └──────┘ └──────┘ └──────┘            │                │
│  │  ┌──────┐ ┌──────┐ ┌──────┐            │                │
│  │  │ کتاب4│ │ کتاب5│ │ کتاب6│            │                │
│  │  └──────┘ └──────┘ └──────┘            │                │
│  └─────────────────────────────────────────┘                │
│                                                              │
│  ┌─────────────────────────────────────────┐                │
│  │  📝 مقالات جدید (4 مقاله)             │                │
│  │  ┌────────┐ ┌────────┐                 │                │
│  │  │ مقاله 1│ │ مقاله 2│                 │                │
│  │  └────────┘ └────────┘                 │                │
│  │  ┌────────┐ ┌────────┐                 │                │
│  │  │ مقاله 3│ │ مقاله 4│                 │                │
│  │  └────────┘ └────────┘                 │                │
│  └─────────────────────────────────────────┘                │
│                                                              │
│  📌 سایدبار:                                                │
│     ├─ 🔍 جستجو                                            │
│     ├─ 📂 دسته‌بندی‌ها (لینک به فیلتر)                   │
│     ├─ ✉️ عضویت در خبرنامه                                │
│     └─ ℹ️ درباره ما (مینی)                                │
└──────────────────────────────────────────────────────────────┘
```

---

### 📦 صفحه محصولات (products.php)

```
┌──────────────────────────────────────────────────────────────┐
│  📦 تمام محصولات                                            │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  فیلترها:                                                   │
│  • دسته‌بندی: روانشناسی، زندگی‌نامه، عاشقانه، رمان، ...  │
│  • جستجو: در نام و توضیحات                                 │
│                                                              │
│  ┌──────────────────────────────────────────┐               │
│  │  Grid محصولات (نامحدود)                │               │
│  │  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐    │               │
│  │  │      │ │      │ │      │ │      │    │               │
│  │  │ کتاب │ │ کتاب │ │ کتاب │ │ کتاب │    │               │
│  │  │      │ │      │ │      │ │      │    │               │
│  │  └──────┘ └──────┘ └──────┘ └──────┘    │               │
│  │  • نام محصول                            │               │
│  │  • دسته‌بندی                            │               │
│  │  • قیمت قدیم (خط خورده)                 │               │
│  │  • قیمت جدید (سبز رنگ)                  │               │
│  │  • درصد تخفیف (badge قرمز)              │               │
│  │  • [افزودن به سبد]                      │               │
│  └──────────────────────────────────────────┘               │
└──────────────────────────────────────────────────────────────┘
```

---

### 🛒 صفحه محصول (single_product.php)

```
┌──────────────────────────────────────────────────────────────┐
│  🛒 جزئیات محصول                                            │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌─────────────────┐  ┌──────────────────────────┐         │
│  │                 │  │  نام: عادت‌های اتمی      │         │
│  │   📸 تصویر      │  │  دسته: توسعه فردی        │         │
│  │    محصول        │  │  موجودی: 5 عدد           │         │
│  │                 │  │  قیمت: 560,000 تومان     │         │
│  │                 │  │  قیمت ویژه: 495,000 ت   │         │
│  │                 │  │  تخفیف: 12%              │         │
│  └─────────────────┘  │                          │         │
│                       │  📝 توضیحات کامل         │         │
│                       │  ...متن توضیحات...       │         │
│                       │                          │         │
│                       │  [🛒 افزودن به سبد]      │         │
│                       │  [✅ مشاهده سبد خرید]    │         │
│                       └──────────────────────────┘         │
│                                                              │
│  ┌──────────────────────────────────────────────┐           │
│  │  💬 نظرات کاربران (4)                       │           │
│  │  ┌────────────────────────────────────┐      │           │
│  │  │ 👤 علی احمدی | 1403/10/15          │      │           │
│  │  │ عالی بود، پیشنهاد میکنم            │      │           │
│  │  └────────────────────────────────────┘      │           │
│  │  ...                                         │           │
│  │                                              │           │
│  │  📝 ثبت نظر جدید:                           │           │
│  │  [نام] [متن نظر] [ارسال]                   │           │
│  └──────────────────────────────────────────────┘           │
└──────────────────────────────────────────────────────────────┘
```

---

### 🛍️ سبد خرید (cart.php)

```
┌──────────────────────────────────────────────────────────────┐
│  🛍️ سبد خرید شما                                            │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌──────────────────────────────────────────────────────┐   │
│  │ تصویر │ نام محصول    │ قیمت واحد │ تعداد │ جمع    │   │
│  ├──────────────────────────────────────────────────────┤   │
│  │  📷   │ عادت اتمی     │ 495,000   │ [2]   │ 990K   │   │
│  │  📷   │ 48 قانون      │ 620,000   │ [1]   │ 620K   │   │
│  │  📷   │ my before you │ 525,000   │ [3]   │ 1575K  │   │
│  ├──────────────────────────────────────────────────────┤   │
│  │                           مجموع کل: 3,185,000 تومان   │   │
│  └──────────────────────────────────────────────────────┘   │
│                                                              │
│  عملیات:                                                    │
│  • تغییر تعداد (AJAX → update_cart.php)                    │
│  • حذف محصول (AJAX → remove_from_cart.php)                │
│  • [💳 پرداخت] ← فعلاً صوری                                │
│                                                              │
│  💾 ذخیره‌سازی: $_SESSION['cart'] = [id => qty, ...]      │
└──────────────────────────────────────────────────────────────┘
```

---

### 📝 صفحه مقالات (posts.php)

```
┌──────────────────────────────────────────────────────────────┐
│  📝 تمام مقالات                                             │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  فیلترها:                                                   │
│  • دسته‌بندی: مقالات، روانشناسی، ...                       │
│  • جستجو: در عنوان و متن                                   │
│                                                              │
│  ┌──────────────────────────────────────────┐               │
│  │  📄 مقاله 1                              │               │
│  │  ┌─────────┐                             │               │
│  │  │ تصویر   │  عنوان: لورم ایپسوم 1      │               │
│  │  │ مقاله   │  نویسنده: محمد مهرابی       │               │
│  │  └─────────┘  خلاصه: لورم ایپسوم...     │               │
│  │               [ادامه مطلب →]             │               │
│  └──────────────────────────────────────────┘               │
│  ...                                                         │
└──────────────────────────────────────────────────────────────┘
```

---

### 📖 صفحه تک مقاله (single.php)

```
┌──────────────────────────────────────────────────────────────┐
│  📖 لورم ایپسوم 1                                           │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌──────────────────────────────────┐                       │
│  │      📸 تصویر کامل مقاله         │                       │
│  └──────────────────────────────────┘                       │
│                                                              │
│  دسته‌بندی: مقالات                                          │
│  نویسنده: محمد مهرابی                                       │
│                                                              │
│  📄 متن کامل مقاله:                                         │
│  لورم ایپسوم متن ساختگی...                                 │
│  ...                                                         │
│                                                              │
│  ─────────────────────────────────────                       │
│                                                              │
│  💬 نظرات (7):                                              │
│  ┌────────────────────────────────┐                         │
│  │ 👤 علی | عالی بود               │                         │
│  └────────────────────────────────┘                         │
│  ...                                                         │
│                                                              │
│  📝 ثبت نظر جدید:                                           │
│  [نام] [متن نظر] [ارسال]                                   │
│  • نظرات پس از تایید مدیر نمایش داده می‌شوند               │
└──────────────────────────────────────────────────────────────┘
```

---

### 🔍 جستجو (search.php)

```
┌──────────────────────────────────────────────────────────────┐
│  🔍 نتایج جستجو برای: "روانشناسی"                          │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  📦 محصولات (2 مورد):                                       │
│  ┌──────┐ ┌──────┐                                          │
│  │ کتاب1│ │ کتاب2│                                          │
│  └──────┘ └──────┘                                          │
│                                                              │
│  📝 مقالات (3 مورد):                                        │
│  • مقاله 1: ...                                             │
│  • مقاله 2: ...                                             │
│  • مقاله 3: ...                                             │
│                                                              │
│  جستجو در:                                                  │
│  • نام محصول                                                │
│  • توضیحات محصول                                            │
│  • عنوان مقاله                                              │
│  • متن مقاله                                                │
└──────────────────────────────────────────────────────────────┘
```

---

### ℹ️ درباره ما (about.php)

```
┌──────────────────────────────────────────────────────────────┐
│  ℹ️ درباره کتاب‌نت                                          │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  📖 داستان ما:                                              │
│  • تأسیس در سال 1395                                        │
│  • ماموریت: دسترسی آسان به کتاب                            │
│                                                              │
│  ✨ ارزش‌های ما:                                            │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐                      │
│  │کیفیت │ │ارسال │ │قیمت  │ │پشتیب│                      │
│  │ برتر │ │سریع  │ │مناسب │ │24/7 │                      │
│  └──────┘ └──────┘ └──────┘ └──────┘                      │
│                                                              │
│  📊 آمار:                                                    │
│  • 10,000+ کتاب متنوع                                       │
│  • 50,000+ کاربر فعال                                       │
│  • 100,000+ سفارش تحویل شده                                 │
│  • 4.8/5 رضایت مشتریان                                      │
│                                                              │
│  👥 تیم ما:                                                 │
│  ┌────────┐ ┌────────┐ ┌────────┐                          │
│  │👨‍💼 علی  │ │👩‍💻 سارا │ │👨‍🎨 رضا  │                          │
│  │مدیرعامل│ │مدیر فنی│ │مدیرمحت│                          │
│  └────────┘ └────────┘ └────────┘                          │
│                                                              │
│  📞 تماس با ما:                                             │
│  • تلفن: 021-1234567                                        │
│  • ایمیل: info@ketabnet.ir                                 │
│  • آدرس: تهران، خیابان ولیعصر                              │
└──────────────────────────────────────────────────────────────┘
```

---

## 🔐 پنل مدیریت (Admin)

### 📊 داشبورد (admin/index.php)

```
┌──────────────────────────────────────────────────────────────┐
│  🎛️ داشبورد مدیریت                                          │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  📝 مقالات اخیر (5 تا):                                     │
│  ┌────────────────────────────────────┐                     │
│  │ # │ عنوان │ نویسنده │ [ویرایش][حذف]│                     │
│  └────────────────────────────────────┘                     │
│  [مشاهده همه] [افزودن جدید]                                │
│                                                              │
│  📦 محصولات اخیر (5 تا):                                    │
│  ┌────────────────────────────────────┐                     │
│  │ # │ نام │ قیمت │ موجودی │ [ویرایش][حذف]│                 │
│  └────────────────────────────────────┘                     │
│  [مشاهده همه] [افزودن جدید]                                │
│                                                              │
│  💬 نظرات در انتظار تایید (5 تا):                          │
│  ┌────────────────────────────────────┐                     │
│  │ نام │ متن نظر │ [تایید] [حذف]     │                     │
│  └────────────────────────────────────┘                     │
│                                                              │
│  📂 دسته‌بندی‌ها (همه):                                     │
│  • مقالات [ویرایش][حذف]                                     │
│  • روانشناسی [ویرایش][حذف]                                  │
│  • زندگی‌نامه [ویرایش][حذف]                                │
│  • ...                                                       │
└──────────────────────────────────────────────────────────────┘
```

---

### 📝 مدیریت مقالات

#### لیست (admin/post.php)
```
┌──────────────────────────────────────────────────────────────┐
│  📝 مقالات                                  [+ ایجاد مقاله] │
├──────────────────────────────────────────────────────────────┤
│  # │ عنوان      │ نویسنده    │ دسته‌بندی  │ عملیات          │
│  1 │ لورم ایپ1  │ محمد مهرابی│ مقالات     │ [ویرایش][حذف]   │
│  2 │ لورم ایپ2  │ صادق محمدی │ مقالات     │ [ویرایش][حذف]   │
│  3 │ لورم ایپ3  │ علی شیخ    │ مقالات     │ [ویرایش][حذف]   │
│  ...                                                         │
└──────────────────────────────────────────────────────────────┘
```

#### افزودن/ویرایش (admin/new_post.php | edit_post.php)
```
┌──────────────────────────────────────────────────────────────┐
│  ➕ ایجاد مقاله جدید                                        │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  عنوان: [_____________________________]                     │
│                                                              │
│  نویسنده: [_____________________________]                   │
│                                                              │
│  دسته‌بندی: [▼ انتخاب کنید]                                │
│              • مقالات                                        │
│              • روانشناسی                                     │
│              • ...                                           │
│                                                              │
│  متن مقاله: (ویرایشگر CKEditor)                             │
│  ┌────────────────────────────────────────┐                 │
│  │ B I U | H1 H2 H3 | Link Image          │                 │
│  ├────────────────────────────────────────┤                 │
│  │                                        │                 │
│  │  [متن مقاله با قالب‌بندی کامل]        │                 │
│  │                                        │                 │
│  └────────────────────────────────────────┘                 │
│                                                              │
│  تصویر: [Browse...] [آپلود]                                │
│         📁 مسیر: /upload/posts/                             │
│                                                              │
│  [💾 ذخیره] [❌ لغو]                                        │
└──────────────────────────────────────────────────────────────┘
```

---

### 📦 مدیریت محصولات

#### لیست (admin/product.php)
```
┌──────────────────────────────────────────────────────────────┐
│  📦 محصولات                                 [+ ایجاد محصول] │
├──────────────────────────────────────────────────────────────┤
│ # │ نام محصول │ دسته    │ قیمت   │ قیمت جدید│ موجودی│ عملیات│
│ 1 │ مارادونا  │ زندگی‌نامه│ 480K  │ 360K    │ 10    │[✏️][🗑️]│
│ 2 │ عادت اتمی │ توسعه فردی│ 560K  │ 495K    │ 5     │[✏️][🗑️]│
│ 4 │ my before │ عاشقانه  │ 650K  │ 525K    │ 8     │[✏️][🗑️]│
│ ...                                                          │
└──────────────────────────────────────────────────────────────┘
```

#### افزودن/ویرایش (admin/new_product.php | edit_product.php)
```
┌──────────────────────────────────────────────────────────────┐
│  ➕ ایجاد محصول جدید                                        │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  نام محصول: [_____________________________]                 │
│                                                              │
│  دسته‌بندی: [▼ انتخاب کنید]                                │
│              • روانشناسی                                     │
│              • زندگی‌نامه                                    │
│              • عاشقانه                                       │
│              • رمان                                          │
│              • توسعه فردی                                    │
│                                                              │
│  قیمت: [____________] تومان                                 │
│                                                              │
│  قیمت جدید (با تخفیف): [____________] تومان                │
│                                                              │
│  تعداد موجودی: [______] عدد                                 │
│                                                              │
│  توضیحات:                                                   │
│  ┌────────────────────────────────────────┐                 │
│  │                                        │                 │
│  │  [متن توضیحات کامل محصول]             │                 │
│  │                                        │                 │
│  └────────────────────────────────────────┘                 │
│                                                              │
│  تصویر: [Browse...] [آپلود]                                │
│         📁 مسیر: /upload/products/                          │
│         پیش‌نمایش: [📷]                                     │
│                                                              │
│  [💾 ذخیره] [❌ لغو]                                        │
└──────────────────────────────────────────────────────────────┘
```

---

### 📂 مدیریت دسته‌بندی

#### لیست (admin/category.php)
```
┌──────────────────────────────────────────────────────────────┐
│  📂 دسته‌بندی‌ها                            [+ ایجاد دسته]  │
├──────────────────────────────────────────────────────────────┤
│  # │ عنوان        │ عملیات                                  │
│  2 │ مقالات       │ [ویرایش] [حذف]                          │
│ 14 │ روانشناسی     │ [ویرایش] [حذف]                          │
│ 15 │ زندگی‌نامه   │ [ویرایش] [حذف]                          │
│ 16 │ عاشقانه      │ [ویرایش] [حذف]                          │
│ 17 │ رمان         │ [ویرایش] [حذف]                          │
│ 18 │ توسعه فردی   │ [ویرایش] [حذف]                          │
└──────────────────────────────────────────────────────────────┘
```

#### افزودن/ویرایش (admin/new_category.php | edit_category.php)
```
┌──────────────────────────────────────────────────────────────┐
│  ➕ ایجاد دسته‌بندی جدید                                    │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  عنوان: [_____________________________]                     │
│                                                              │
│  [💾 ذخیره] [❌ لغو]                                        │
└──────────────────────────────────────────────────────────────┘
```

---

### 💬 مدیریت نظرات (admin/comment.php)

```
┌──────────────────────────────────────────────────────────────┐
│  💬 نظرات مقالات                                            │
├──────────────────────────────────────────────────────────────┤
│  # │ نام    │ متن نظر          │ وضعیت        │ عملیات       │
│  1 │ علی    │ عالی بود...      │ ❌ در انتظار │ [✅تایید][🗑️]│
│  2 │ محمد   │ مفید بود...      │ ✅ تایید شده │ [        ][🗑️]│
│  3 │ نیما   │ خوب نبود...      │ ❌ در انتظار │ [✅تایید][🗑️]│
│  ...                                                         │
│                                                              │
│  عملیات:                                                    │
│  • تایید: تغییر status از 0 به 1                           │
│  • حذف: DELETE FROM comments                                │
└──────────────────────────────────────────────────────────────┘
```

---

### 🔐 ورود به پنل (admin/signin.php)

```
┌──────────────────────────────────────────────────────────────┐
│                    🔐 ورود به پنل مدیریت                    │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│           ┌────────────────────────────────┐                │
│           │                                │                │
│           │   📧 ایمیل:                   │                │
│           │   [____________________]       │                │
│           │                                │                │
│           │   🔒 رمز عبور:                │                │
│           │   [____________________]       │                │
│           │                                │                │
│           │   [🔑 ورود]                   │                │
│           │                                │                │
│           └────────────────────────────────┘                │
│                                                              │
│  بررسی:                                                     │
│  SELECT * FROM users                                         │
│  WHERE email = ? AND password = ?                            │
│                                                              │
│  ⚠️ توجه: رمز عبور Plain Text است (غیرامن!)                │
│  💡 پیشنهاد: استفاده از password_hash()                     │
└──────────────────────────────────────────────────────────────┘
```

---

## 💾 ساختار دیتابیس

### 🗄️ جداول MySQL

```sql
📋 1. categories (دسته‌بندی‌ها)
┌────────────────────────────────────────┐
│ id (PK)     INT AUTO_INCREMENT         │
│ title       VARCHAR(100)               │
└────────────────────────────────────────┘
دسته‌های فعلی:
• مقالات (id=2)
• روانشناسی (id=14)
• زندگی‌نامه (id=15)
• عاشقانه (id=16)
• رمان (id=17)
• توسعه فردی (id=18)

────────────────────────────────────────────

📰 2. posts (مقالات)
┌────────────────────────────────────────┐
│ id (PK)         INT AUTO_INCREMENT     │
│ title           VARCHAR(191)           │
│ author          VARCHAR(191)           │
│ category_id     INT (FK → categories)  │
│ body            TEXT                   │
│ image           VARCHAR(191)           │
└────────────────────────────────────────┘
Foreign Key: category_id → categories.id
مسیر تصاویر: /upload/posts/

────────────────────────────────────────────

📦 3. product (محصولات)
┌────────────────────────────────────────┐
│ id (PK)         INT AUTO_INCREMENT     │
│ name            VARCHAR(50)            │
│ category_id     INT (FK → categories)  │
│ price           VARCHAR(50)            │
│ new-price       VARCHAR(80)            │
│ number          VARCHAR(88) [موجودی]   │
│ pic             VARCHAR(80)            │
│ description     TEXT                   │
└────────────────────────────────────────┘
Foreign Key: category_id → categories.id
مسیر تصاویر: /upload/products/

────────────────────────────────────────────

💬 4. comments (نظرات مقالات)
┌────────────────────────────────────────┐
│ id (PK)         INT AUTO_INCREMENT     │
│ name            VARCHAR(100)           │
│ comment         TEXT                   │
│ post_id         INT (FK → posts)       │
│ status          TINYINT(1) [0/1]       │
└────────────────────────────────────────┘
status:
• 0 = در انتظار تایید
• 1 = تایید شده
Foreign Key: post_id → posts.id

────────────────────────────────────────────

💬 5. product_comments (نظرات محصولات)
┌────────────────────────────────────────┐
│ id (PK)         INT AUTO_INCREMENT     │
│ name            VARCHAR(100)           │
│ comment         TEXT                   │
│ product_id      INT (FK → product)     │
│ created_at      TIMESTAMP              │
└────────────────────────────────────────┘
Foreign Key: product_id → product.id

────────────────────────────────────────────

✉️ 6. subscribers (خبرنامه)
┌────────────────────────────────────────┐
│ id (PK)         INT AUTO_INCREMENT     │
│ name            VARCHAR(191)           │
│ email           VARCHAR(191)           │
└────────────────────────────────────────┘

────────────────────────────────────────────

👥 7. users (مدیران)
┌────────────────────────────────────────┐
│ id (PK)         INT AUTO_INCREMENT     │
│ email           VARCHAR(255)           │
│ password        VARCHAR(255)           │
└────────────────────────────────────────┘
⚠️ رمز عبور Plain Text است!

────────────────────────────────────────────

🎬 8. posts_slider (اسلایدر صفحه اصلی)
┌────────────────────────────────────────┐
│ id (PK)         INT AUTO_INCREMENT     │
│ post_id         INT (FK → posts)       │
│ active          TINYINT(1) [0/1]       │
└────────────────────────────────────────┘
Foreign Key: post_id → posts.id

────────────────────────────────────────────

📸 9. img (تصاویر اسلایدر)
┌────────────────────────────────────────┐
│ id (PK)         INT AUTO_INCREMENT     │
│ img             VARCHAR(109)           │
└────────────────────────────────────────┘
مسیر: /img1/
تصاویر فعلی: 4.jpg, 9.jpg, 11.jpg
```

---

## 🔄 جریان داده (Data Flow)

### 🛒 فرآیند خرید:

```
1. کاربر وارد صفحه محصول می‌شود
   └─→ single_product.php?product=1

2. کلیک روی "افزودن به سبد"
   └─→ AJAX → add_to_cart.php?product_id=1
       └─→ $_SESSION['cart'][1] = 1

3. مشاهده سبد خرید
   └─→ cart.php
       └─→ خواندن $_SESSION['cart']
       └─→ SELECT * FROM product WHERE id IN (1,2,3...)

4. تغییر تعداد
   └─→ AJAX → update_cart.php
       └─→ $_SESSION['cart'][1] = 3

5. حذف محصول
   └─→ AJAX → remove_from_cart.php
       └─→ unset($_SESSION['cart'][1])

6. پرداخت (فعلاً صوری)
   └─→ alert('برای ادامه خرید...')
```

---

### 💬 فرآیند ثبت نظر:

```
🔵 نظر مقاله:
1. کاربر در single.php نظر می‌نویسد
2. POST → single.php
3. INSERT INTO comments (name, comment, post_id, status=0)
4. هدایت به همان صفحه
5. مدیر در admin/comment.php نظر را تایید می‌کند
6. UPDATE comments SET status=1 WHERE id=?
7. نظر در single.php نمایش داده می‌شود

🔵 نظر محصول:
1. کاربر در single_product.php نظر می‌نویسد
2. POST → single_product.php
3. INSERT INTO product_comments (name, comment, product_id)
4. بلافاصله نمایش داده می‌شود (بدون تایید)
```

---

## 🎨 ویژگی‌های طراحی

### 🌗 دارک مود:
```javascript
// localStorage.getItem('darkMode')
if (darkMode === 'enabled') {
  document.body.classList.add('dark-mode');
  darkModeIcon.textContent = '☀️';
} else {
  darkModeIcon.textContent = '🌙';
}
```

### 📱 Responsive Design:
```css
/* Desktop: grid-template-columns: 2fr 1fr */
@media (max-width: 1200px) {
  /* Tablet: grid-template-columns: 1fr */
}
@media (max-width: 768px) {
  /* Mobile: همه‌چیز تک ستونی */
}
```

### 🎬 انیمیشن‌ها:
```javascript
// Intersection Observer برای انیمیشن ورود عناصر
data-aos="fade-up"
data-aos="fade-left"
data-aos="fade-right"
```

### 🎨 طراحی مدرن:
- Gradient Backgrounds
- Glassmorphism (backdrop-filter)
- Floating Cards
- Smooth Transitions
- Box Shadows
- Border Radius (20px)

---

## 🔒 امنیت

### ✅ نقاط قوت:
```php
// ✅ استفاده از PDO با Prepared Statements
$stmt = $db->prepare('SELECT * FROM posts WHERE id = :id');
$stmt->execute(['id' => $post_id]);

// ✅ تابع escape برای HTML
function escape($string) {
    return htmlspecialchars($string, ENT_QUOTES, 'UTF-8');
}

// ✅ فیلتر ورودی
$product_id = filter_var($_GET['product_id'], FILTER_VALIDATE_INT);
```

### ⚠️ نقاط ضعف:
```php
// ❌ رمز عبور بدون Hash
SELECT * FROM users WHERE email=? AND password=?
// باید تبدیل شود به:
password_verify($input, $hash)

// ❌ عدم وجود CSRF Token در فرم‌ها
// باید اضافه شود:
<input type="hidden" name="csrf_token" value="<?= $token ?>">

// ❌ عدم اعتبارسنجی نوع فایل در آپلود
// باید چک شود:
if (!in_array($ext, ['jpg', 'jpeg', 'png'])) { ... }
```

---

## 🚀 قابلیت‌های آینده (پیشنهادی)

### 📝 TODO List:

```
☐ سیستم احراز هویت کاربران
  └─ ثبت‌نام
  └─ ورود
  └─ پروفایل
  └─ سفارشات من

☐ درگاه پرداخت واقعی
  └─ زرین‌پال
  └─ آی‌دی پی
  └─ پی

☐ سیستم فاکتور و سفارشات
  └─ جدول orders
  └─ جدول order_items
  └─ پیگیری سفارش

☐ ویرایشگر پیشرفته‌تر
  └─ Quill.js
  └─ TinyMCE
  └─ آپلود تصویر داخل متن

☐ بهبود امنیت
  └─ Password Hash
  └─ CSRF Protection
  └─ Rate Limiting
  └─ File Upload Validation

☐ بهینه‌سازی
  └─ Lazy Loading تصاویر
  └─ Minify CSS/JS
  └─ CDN
  └─ Caching

☐ SEO
  └─ Sitemap.xml
  └─ Robots.txt
  └─ Meta Tags
  └─ Structured Data

☐ قابلیت‌های جدید
  └─ نظرات محصول با ستاره
  └─ مقایسه محصولات
  └─ لیست علاقه‌مندی‌ها
  └─ اشتراک‌گذاری در شبکه‌های اجتماعی
  └─ پیشنهاد محصولات مرتبط
```

---

## 📊 آمار پروژه

```
📄 تعداد فایل‌های PHP: 37
📁 تعداد پوشه‌ها: 8
📦 حجم پروژه: ~5 MB (با تصاویر)
🗄️ تعداد جداول دیتابیس: 9
👤 تعداد کاربران: 2 (admin)
📝 تعداد مقالات نمونه: 5
📦 تعداد محصولات نمونه: 6
📂 تعداد دسته‌بندی‌ها: 6
💬 تعداد نظرات نمونه: 7
✉️ تعداد مشترکین نمونه: 2
🎬 تعداد تصاویر اسلایدر: 3
```

---

## 🛠️ تکنولوژی‌های استفاده شده

### Backend:
```
✅ PHP 7.4+
✅ MySQL (MariaDB)
✅ PDO (PHP Data Objects)
✅ Session Management
```

### Frontend:
```
✅ HTML5
✅ CSS3 (Custom Properties, Grid, Flexbox)
✅ Vanilla JavaScript (ES6+)
✅ AJAX (Fetch API)
✅ Responsive Design
```

### ابزارها:
```
✅ CKEditor 4 (ویرایشگر متن)
✅ Font Awesome Icons (از طریق SVG)
✅ Google Fonts (Vazirmatn)
✅ Intersection Observer API (انیمیشن‌ها)
```

---

## 📖 راهنمای نصب و راه‌اندازی

### گام 1: آماده‌سازی سرور
```bash
# نیازمندی‌ها:
- Apache/Nginx
- PHP 7.4+ (با extension: pdo_mysql, mbstring)
- MySQL 5.7+ / MariaDB 10+
```

### گام 2: ایجاد دیتابیس
```sql
CREATE DATABASE blog_webprog CHARACTER SET utf8mb4 COLLATE utf8mb4_persian_ci;
```

### گام 3: Import فایل SQL
```bash
mysql -u root -p blog_webprog < database/blog_webprog.sql
```

### گام 4: تنظیم Config
```php
// include/config.php
define("DB_HOST", "localhost");
define("DB_NAME", "blog_webprog");
define("DB_USER", "root");
define("DB_PASS", "YOUR_PASSWORD");
```

### گام 5: تنظیم مجوزها
```bash
chmod 755 upload/
chmod 755 upload/posts/
chmod 755 upload/products/
```

### گام 6: ورود به پنل
```
URL: http://localhost/ketab-net/admin/signin.php
Email: navid@gmail.com
Password: 123456
```

---

## 🎓 یادگیری از این پروژه

### مفاهیم کلیدی:
```
✅ MVC Pattern (نسبتاً)
✅ CRUD Operations (Create, Read, Update, Delete)
✅ RESTful-like APIs (add_to_cart.php, etc.)
✅ Session Management
✅ File Upload
✅ SQL Relationships (Foreign Keys)
✅ Prepared Statements (SQL Injection Prevention)
✅ XSS Prevention (htmlspecialchars)
✅ Responsive Design
✅ Dark Mode Implementation
✅ AJAX Requests
✅ Dynamic Content Loading
✅ Search Functionality
✅ Pagination (می‌تواند اضافه شود)
```

---

## 📞 اطلاعات تماس پروژه

```
📧 ایمیل: info@ketabnet.ir
📞 تلفن: 021-1234567
🌐 وبسایت: http://localhost/ketab-net
📍 آدرس: تهران، خیابان ولیعصر
```

---

## 📜 لایسنس

این پروژه یک نمونه آموزشی است و برای استفاده شخصی و یادگیری طراحی شده است.

---

**🎉 موفق باشید!**

*آخرین بروزرسانی: دی ۱۴۰۴*